{"version":3,"file":"static/js/321.e4927fe3.chunk.js","mappings":"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","sources":["components/FormInput/FormInput.js","webpack://my-app/./src/components/MovieArticle/MovieArticle.module.css?c92a","components/MovieArticle/MovieArticle.js","webpack://my-app/./src/components/Title/Title.module.css?a947","components/Title/Title.js","webpack://my-app/./src/pages/ProfilePage/ProfilePage.module.css?2c99","pages/ProfilePage/ProfilePage.js","../node_modules/@mui/icons-material/Edit.js"],"sourcesContent":["import { styled } from '@mui/material/styles';\r\nimport { TextField } from '@mui/material';\r\n\r\nconst FormInput = styled(TextField)({\r\n  '& label.Mui-focused': {\r\n    color: 'black',\r\n  },\r\n  '& label.Mui-error': {\r\n    color: 'red',\r\n  },\r\n  '& input:valid + fieldset': {\r\n    borderColor: 'grey',\r\n    borderWidth: 1,\r\n  },\r\n  '& input:invalid + fieldset': {\r\n    borderColor: 'red',\r\n    borderWidth: 2,\r\n  },\r\n  '& input:valid:focus + fieldset': {\r\n    borderColor: 'black',\r\n    borderLeftWidth: 6,\r\n    padding: '4px !important',\r\n  },\r\n  '& div.Mui-error.Mui-focused fieldset': {\r\n    borderColor: 'red',\r\n    borderLeftWidth: 6,\r\n    padding: '4px !important',\r\n  },\r\n});\r\n\r\nexport default FormInput;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"MovieArticle_title__hAt2X\",\"info\":\"MovieArticle_info__V1Hcf\",\"list__item\":\"MovieArticle_list__item__sdDcF\"};","import styles from './MovieArticle.module.css';\r\n\r\nexport default function MovieArticle({ title, content }) {\r\n  return (\r\n    <>\r\n      {content && (\r\n        <article>\r\n          <h3 className={styles.title}>{title}</h3>\r\n          <p className={styles.info}>{content}</p>\r\n        </article>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"Title_title__znxtH\"};","import styles from './Title.module.css';\r\n\r\nexport default function Title({ text }) {\r\n  return <h2 className={styles.title}>{text}</h2>;\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ProfilePage_wrapper__31QOm\",\"form\":\"ProfilePage_form__Y-bB-\",\"input\":\"ProfilePage_input__tyzjq\",\"edit__btn\":\"ProfilePage_edit__btn__QiNfp\",\"avatar\":\"ProfilePage_avatar__iqxQ-\",\"info\":\"ProfilePage_info__yUNFD\",\"preview\":\"ProfilePage_preview__8sBzo\",\"btn__wrapper\":\"ProfilePage_btn__wrapper__tUchI\"};","import Avatar from '@mui/material/Avatar';\r\nimport { StyledBtn, ContainedBtn } from 'components/StyledBtn/StyledBtn';\r\nimport { useSelector } from 'react-redux';\r\nimport styles from './ProfilePage.module.css';\r\nimport { joiResolver } from '@hookform/resolvers/joi';\r\nimport Joi from 'joi';\r\nimport FormInput from 'components/FormInput/FormInput';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { operations, selectors as authSelectors } from 'redux/auth';\r\nimport { selectors as movieSelectors } from 'redux/movies';\r\nimport { useDispatch } from 'react-redux';\r\nimport Title from 'components/Title/Title';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport MovieArticle from 'components/MovieArticle/MovieArticle';\r\nimport Paper from '@mui/material/Paper';\r\nimport { Oval } from 'react-loader-spinner';\r\nimport { useState, useEffect } from 'react';\r\nimport DialogModal from 'components/DialogModal/DialogModal';\r\n\r\nconst schema = Joi.object({\r\n  name: Joi.string().alphanum().min(3).max(30).required(),\r\n  image: Joi.any(),\r\n}).required();\r\n\r\nexport default function ProfilePage() {\r\n  const user = useSelector(authSelectors.getUser);\r\n  const isLoading = useSelector(authSelectors.getLoader);\r\n  const favoriteMovies = useSelector(movieSelectors.getFavoriteMoviesList);\r\n  const dispatch = useDispatch();\r\n  const {\r\n    handleSubmit,\r\n    control,\r\n    reset,\r\n    formState: { errors },\r\n    register,\r\n    watch,\r\n  } = useForm({\r\n    defaultValues: { name: user.name, image: null },\r\n    resolver: joiResolver(schema),\r\n  });\r\n\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const [disabled, setDisabled] = useState(true);\r\n\r\n  const img = watch('image');\r\n  const name = watch('name');\r\n\r\n  useEffect(() => {\r\n    if (name === user.name && img === null) {\r\n      setDisabled(true);\r\n      return;\r\n    }\r\n    setDisabled(false);\r\n    if (!img) {\r\n      return;\r\n    }\r\n    setSelectedFile(img[0]);\r\n  }, [img, name, user.name]);\r\n\r\n  useEffect(() => {\r\n    if (!selectedFile) {\r\n      return;\r\n    }\r\n    const objectUrl = URL.createObjectURL(selectedFile);\r\n\r\n    setPreview(objectUrl);\r\n\r\n    return () => URL.revokeObjectURL(objectUrl);\r\n  }, [selectedFile]);\r\n\r\n  const submit = data => {\r\n    if (data.name === user.name && data.image === null) {\r\n      return;\r\n    }\r\n    dispatch(operations.updateCurrentUser(data));\r\n  };\r\n\r\n  const onDiscard = () => {\r\n    setPreview(null);\r\n    reset();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Title text=\"Your Profile\" />\r\n      <div className={styles.wrapper}>\r\n        <form onSubmit={handleSubmit(submit)} className={styles.form}>\r\n          {preview && <p className={styles.preview}>Image preview</p>}\r\n          <Avatar\r\n            alt={user.name}\r\n            src={preview || user.photo}\r\n            className={styles.avatar}\r\n          />\r\n\r\n          <ContainedBtn\r\n            startIcon={<EditIcon />}\r\n            variant=\"outlined\"\r\n            component=\"label\"\r\n            className={styles.edit__btn}\r\n          >\r\n            Edit\r\n            <input\r\n              {...register('image')}\r\n              name=\"image\"\r\n              hidden\r\n              accept=\"image/*\"\r\n              type=\"file\"\r\n            />\r\n          </ContainedBtn>\r\n\r\n          <Controller\r\n            name=\"name\"\r\n            control={control}\r\n            render={({ field }) => (\r\n              <FormInput\r\n                {...field}\r\n                label=\"Name*\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n                autoComplete=\"off\"\r\n                className={styles.input}\r\n                error={!!errors.name}\r\n                helperText={errors?.name?.message}\r\n              />\r\n            )}\r\n          />\r\n          <div className={styles.btn__wrapper}>\r\n            <DialogModal\r\n              btn=\"Discard\"\r\n              disabled={disabled}\r\n              title=\"Are you sure?\"\r\n              text=\"Changes you made may not be saved.\"\r\n              agreeFn={onDiscard}\r\n            />\r\n            {isLoading ? (\r\n              <StyledBtn\r\n                variant=\"outlined\"\r\n                startIcon={\r\n                  <Oval\r\n                    height={9}\r\n                    width={10}\r\n                    color=\"#000\"\r\n                    wrapperStyle={{ display: 'flex', justifyContent: 'center' }}\r\n                    secondaryColor=\"#f0\"\r\n                    strokeWidth={8}\r\n                    strokeWidthSecondary={8}\r\n                  />\r\n                }\r\n              />\r\n            ) : (\r\n              <ContainedBtn\r\n                disabled={disabled}\r\n                variant=\"contained\"\r\n                type=\"submit\"\r\n              >\r\n                Save\r\n              </ContainedBtn>\r\n            )}\r\n          </div>\r\n        </form>\r\n        <Paper className={styles.info}>\r\n          <MovieArticle title=\"User name\" content={user.name} />\r\n          <MovieArticle title=\"Public e-mail\" content={user.email} />\r\n          {favoriteMovies.length > 0 && (\r\n            <p>Favorite movies: {favoriteMovies.length}</p>\r\n          )}\r\n        </Paper>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');\nexports.default = _default;"],"names":["FormInput","styled","TextField","color","borderColor","borderWidth","borderLeftWidth","padding","MovieArticle","title","content","className","styles","Title","text","schema","Joi","name","alphanum","min","max","required","image","ProfilePage","user","useSelector","authSelectors","isLoading","favoriteMovies","movieSelectors","dispatch","useDispatch","useForm","defaultValues","resolver","joiResolver","handleSubmit","control","reset","errors","formState","register","watch","useState","selectedFile","setSelectedFile","preview","setPreview","disabled","setDisabled","img","useEffect","objectUrl","URL","createObjectURL","revokeObjectURL","onSubmit","data","operations","Avatar","alt","src","photo","startIcon","Edit","variant","component","hidden","accept","type","render","field","label","size","autoComplete","error","helperText","message","DialogModal","btn","agreeFn","StyledBtn","height","width","wrapperStyle","display","justifyContent","secondaryColor","strokeWidth","strokeWidthSecondary","Paper","email","length","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}